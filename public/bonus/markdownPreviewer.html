<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Live Markdown Previewer</title>
    <!-- Load Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Marked.js library for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked@12.0.0/lib/marked.umd.min.js"></script>

    <style>
      /* Set default font and base background */
      body {
        font-family: "Inter", sans-serif;
      }

      /* Custom styles for the rendered Markdown within the #preview pane */
      #preview {
        background-color: #ffffff;
        line-height: 1.6;
        overflow-wrap: break-word;
      }
      /* Markdown headings styling */
      #preview h1 {
        font-size: 2em;
        border-bottom: 2px solid #e5e7eb;
        padding-bottom: 0.3em;
        margin-top: 1.5em;
        font-weight: 700;
        color: #1f2937;
      }
      #preview h2 {
        font-size: 1.5em;
        border-bottom: 1px solid #e5e7eb;
        padding-bottom: 0.3em;
        margin-top: 1.5em;
        font-weight: 600;
        color: #374151;
      }
      /* Lists */
      #preview ul {
        list-style-type: disc;
        margin-left: 1.5em;
        padding-left: 0.5em;
      }
      #preview ol {
        list-style-type: decimal;
        margin-left: 1.5em;
        padding-left: 0.5em;
      }
      #preview li {
        margin-bottom: 0.5em;
      }
      /* Code blocks */
      #preview pre {
        background-color: #1f2937;
        color: #f9fafb;
        padding: 1em;
        border-radius: 0.5rem;
        overflow-x: auto;
        font-size: 0.9em;
      }
      /* Inline code */
      #preview code:not(pre code) {
        background-color: #e5e7eb;
        color: #9d174d;
        padding: 0.2em 0.4em;
        border-radius: 0.3rem;
        font-weight: 600;
      }
      /* Blockquotes */
      #preview blockquote {
        border-left: 4px solid #4f46e5;
        color: #4b5563;
        padding-left: 1.5rem;
        margin: 1em 0;
        background-color: #f7f7f7;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        border-radius: 0.5rem;
      }
      /* Textarea customization */
      #markdown-input {
        resize: none;
      }

      /* Height adjustment for desktop layout to fill the screen (minus header) */
      .h-screen-layout {
        height: calc(100vh - 4.5rem);
      }
      /* Mobile adjustment */
      @media (max-width: 639px) {
        .h-screen-layout {
          height: auto;
        }
      }
    </style>
  </head>
  <body class="bg-gray-100 text-gray-800">
    <!-- Header -->
    <div class="p-4 bg-white shadow-lg sticky top-0 z-10">
      <h1 class="text-3xl font-extrabold text-indigo-600">
        Live Markdown Editor
      </h1>
      <p class="text-sm text-gray-500">
        Instant conversion using **marked.js** and **Tailwind CSS**.
      </p>
    </div>

    <!-- Main Editor/Preview Area -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 h-screen-layout">
      <!-- Input Pane -->
      <div
        class="flex flex-col h-full bg-white rounded-xl shadow-lg overflow-hidden"
      >
        <h2
          class="text-xl font-bold p-3 border-b border-gray-200 bg-gray-50 text-gray-700"
        >
          Markdown Source
        </h2>
        <textarea
          id="markdown-input"
          class="flex-grow p-4 text-gray-800 text-base focus:outline-none focus:ring-4 focus:ring-indigo-200 transition duration-150 h-full min-h-[40vh] sm:min-h-0"
          placeholder="Start typing your Markdown here..."
        ></textarea>
      </div>

      <!-- Preview Pane -->
      <div
        class="flex flex-col h-full bg-white rounded-xl shadow-lg overflow-hidden"
      >
        <h2
          class="text-xl font-bold p-3 border-b border-gray-200 bg-indigo-50 text-indigo-700"
        >
          Rendered Preview
        </h2>
        <div
          id="preview"
          class="flex-grow overflow-y-auto p-4 h-full min-h-[40vh] sm:min-h-0"
        >
          <!-- Content will be injected here -->
        </div>
      </div>
    </div>

    <script>
      const markdownInput = document.getElementById("markdown-input");
      const preview = document.getElementById("preview");

      // Sample Markdown to load when the app starts
      const sampleMarkdown = `# Welcome to the Live Markdown Previewer!

This is a **fully responsive** application built using HTML, Tailwind CSS, and vanilla JavaScript. Notice how the layout changes on smaller screens.

---

## Key Markdown Syntax
This editor supports common Markdown elements:

1.  **Headings:** Use \`#\` (like this H2).
2.  **Formatting:** Use \`**bold**\` and \`*italics*\`.
3.  **Links:** \`[Google](https://www.google.com)\`

> Blockquotes are perfect for emphasizing quotes or critical information.

### Code Example
You can use triple backticks (\`\`\`) for multi-line code blocks:

\`\`\`javascript
function convertMarkdown(text) {
    // Uses the marked.js library
    return marked.parse(text);
}
\`\`\`

Or use inline code like \`const element = document.getElementById('preview');\`

-   Unordered lists are simple.
-   Just use a hyphen or asterisk.
-   Happy writing!
`;

      /**
       * Converts Markdown text to HTML and updates the preview element.
       * @param {string} markdownText The text to be parsed.
       */
      const updatePreview = (markdownText) => {
        try {
          // The marked.parse function handles the conversion
          const html = marked.parse(markdownText);
          preview.innerHTML = html;
        } catch (error) {
          // Display error if parsing fails for some reason
          preview.innerHTML = `<p class="text-red-500 font-semibold p-4">Error parsing Markdown: ${error.message}</p>`;
          console.error("Markdown Parsing Error:", error);
        }
      };

      // 1. Initialize the textarea with sample content
      markdownInput.value = sampleMarkdown;
      // 2. Run the initial conversion to populate the preview pane
      updatePreview(sampleMarkdown);

      // 3. Add event listener for real-time updates as the user types
      markdownInput.addEventListener("input", (e) => {
        updatePreview(e.target.value);
      });
    </script>
  </body>
</html>
